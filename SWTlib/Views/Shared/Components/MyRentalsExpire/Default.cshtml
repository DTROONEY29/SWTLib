@model IEnumerable<LibraryData.Models.Rental>

@{ bool isEmpty = true;}

@foreach (var item in Model)
{
    <div class="table">
        <div class="d-flex flex-column">
            <div>
                @{
                    var returnDate = item.ReturnDate.Date;
                    var rDays = DateTime.Today.Date;

                    if (returnDate <= rDays)
                    {
                        <div class="progress shadow-sm" style="height: 20px">
                            <div class="progress-bar bg-danger progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">expired</div>
                        </div>
                        isEmpty = false;
                    }
                    else if (rDays.AddDays(1) == returnDate)
                    {
                        <div class="progress shadow-sm" style="height: 20px">
                            <div class="progress-bar bg-danger" role="progressbar" style="width: 87.5%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">1 Day</div>
                        </div>
                        isEmpty = false;
                    }
                    else if (rDays.AddDays(2) == returnDate)
                    {
                        <div class="progress shadow-sm" style="height: 20px">
                            <div class="progress-bar bg-warning" role="progressbar" style="width: 75%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">2 Days</div>
                        </div>
                        isEmpty = false;
                    }
                    else if (rDays.AddDays(3) == returnDate)
                    {
                        <div class="progress shadow-sm" style="height: 20px">
                            <div class="progress-bar bg-warning" role="progressbar" style="width: 62.5%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">3 Days</div>
                        </div>
                        isEmpty = false;
                    }
                    else if (rDays.AddDays(4) == returnDate)
                    {
                        <div class="progress shadow-sm" style="height: 20px">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 50%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">4 Days</div>
                        </div>
                        isEmpty = false;
                    }
                    else if (rDays.AddDays(5) == returnDate)
                    {
                        <div class="progress shadow-sm" style="height: 20px">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 37.5%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">5 Days</div>
                        </div>
                        isEmpty = false;
                    }
                    else if (rDays.AddDays(6) == returnDate)
                    {
                        <div class="progress shadow-sm" style="height: 20px">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">6 Days</div>
                        </div>
                        isEmpty = false;
                    }
                    else if (rDays.AddDays(7) == returnDate)
                    {
                        <div class="progress shadow-sm" style="height: 20px">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 12.5%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">1 Week</div>
                        </div>
                        isEmpty = false;
                    }
                    else if (isEmpty)
                    {
                        <span>None of you rentals expires in 7 days.</span>
                    }
                }
            </div>
            <div class="d-flex justify-content-center mt-2"><h6><i>@Html.DisplayFor(modelItem => item.Book.Title)</i></h6></div>
        </div>
    </div>
    <hr />
}
